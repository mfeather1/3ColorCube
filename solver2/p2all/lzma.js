// Source: https://github.com/LZMA-JS/LZMA-JS
//! Â© 2015 Nathan Rugg <nmrugg@gmail.com> | MIT
/// See LICENSE for more details.
"undefined"==typeof Worker||"undefined"!=typeof location&&"file:"===location.protocol?"undefined"!=typeof global&&"undefined"!=typeof require?this.LZMA=function(n){return require(n||"./lzma_worker.js").LZMA}:"undefined"!=typeof window&&window.document?function(){var n,e=this,o=function(n){var o=document.createElement("script");o.type="text/javascript",o.src=n,o.onload=function(){e.LZMA=r},document.getElementsByTagName("head")[0].appendChild(o)};function r(e){var r;return o(e),r={compress:function(e,o,t,i){n.LZMA_WORKER?n.LZMA_WORKER.compress(e,o,t,i):setTimeout(function(){r.compress(e,o,t,i)},50)},decompress:function(e,o,t){n.LZMA_WORKER?n.LZMA_WORKER.decompress(e,o,t):setTimeout(function(){r.decompress(e,o,t)},50)},worker:function(){return null}}}"undefined"!=typeof window?n=window:global&&(n=global),e.LZMA=r}():console.error("Can't load the worker. Sorry."):this.LZMA=function(n){var e={},o=new Worker(n||"./lzma_worker-min.js");return o.onmessage=function(n){3===n.data.action?e[n.data.cbn]&&"function"==typeof e[n.data.cbn].on_progress&&e[n.data.cbn].on_progress(n.data.result):e[n.data.cbn]&&"function"==typeof e[n.data.cbn].on_finish&&(e[n.data.cbn].on_finish(n.data.result,n.data.error),delete e[n.data.cbn])},o.onerror=function(n){var o=new Error(n.message+" ("+n.filename+":"+n.lineno+")");for(var r in e)e[r].on_finish(null,o);console.error("Uncaught error in lzma_worker",o)},function(){function n(n,r,t,i,a){var c;do{c=Math.floor(1e7*Math.random())}while(void 0!==e[c]);e[c]={on_finish:i,on_progress:a},o.postMessage({action:n,cbn:c,data:r,mode:t})}return{compress:function(e,o,r,t){n(1,e,o,r,t)},decompress:function(e,o,r){n(2,e,!1,o,r)},worker:function(){return o}}}()};
